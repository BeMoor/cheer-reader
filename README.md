# cheer-reader
Local setup for a Twitch bot which listens for bit cheer events and reads the message aloud with an AI voice from ElevenLabs

I don't do app / frontend / API development so the design is pretty scuffed, but this was just a small project intended to be run locally by the streamer.


# Requirements (Windows)
* Python >=3.10 - https://www.python.org/downloads/release/python-3100/
* PiP - https://pypi.org/project/pip/
* ffmpeg - https://www.gyan.dev/ffmpeg/builds/
* ffprobe - included in download linked above
* elevenlabs account and API access - https://beta.elevenlabs.io/
  * visit their website to see how to create cloned voices.

# Instructions
* Create a file in base project folder, ".env" or edit and save a copy of the <code>dotenv_template.txt</code> file, renaming it to <code>.env</code> without the .txt extension
* Enter the following lines and fill in the required values:
  
    <code>CHANNEL_ID=(integer value, broadcaster's Twitch channel ID)</code>

    <code>CLIENT_ID="(string value, Twitch app which watches for cheer events)"</code>

    <code>AUTH_TOKEN="(string value, Twitch auth token here, generated by broadcaster)"</code>
    
    <code>ELEVENLABS_API_KEY="(string value, api key here)"</code>

    <code>INDICATOR="11io"</code>

* Update PiP if required: <code>pip install --upgrade pip</code>
* Create virtual environment: <code>python -m venv .</code>
* Activate virtual environment: <code>source venv/Scripts/activate</code>
* Install required modules with <code>pip install -r requirements.txt</code>

# Running
* in console, enter <code>python run.py</code>
* to cancel a sound being played, press SPACEBAR+T
* Exit program by pressing Ctrl+C in the terminal that's running the app

# Settings
* Some settings in <b>settings.txt</b> and their default values:
  
  <code>BIT_THRESHOLD=35</code>  - minimum bits in message to process for AI TTS

  <code>EXTRA_CHARS_PER_BIT=10</code>  - bits above the threshold will increase the MAX_CHARS cap by this amount per extra bit

  <code>AUDIO_INCREASE=0</code>  - default audio data may be too quiet, can increase here. Experiment with values like 1 or 2

  <code>MAX_CHARS=300</code>  - initial maximum number of characters to be read by the AI TTS, can be increased with more bits

* Banning specific users
  * Enter usernames in <b>user_blacklist.txt</b> to disable AI TTS from specific users. Does not require restart to edit.
  
* Whitelist specific users
  * in the <code>.env</code> file, enter usernames separated by commes, to allow specific users to use AI TTS for 1 bit (the Twitch app can only see cheer events so truly free TTS doesn't exist yet)
  
